<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dYpSy Protector - Elite Edition</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;700;800&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon: #00f2ff;
            --neon-danger: #ff0077;
            --bg: #010409;
            --card: rgba(13, 17, 23, 0.95);
            --border: rgba(0, 242, 255, 0.2);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background-color: var(--bg); color: #fff; font-family: 'Plus Jakarta Sans', sans-serif;
            min-height: 100vh; padding: 20px; display: flex; justify-content: center;
        }

        .container { width: 100%; max-width: 500px; }
        .header { text-align: center; margin-bottom: 20px; }
        .header h1 { color: var(--neon); font-weight: 800; text-shadow: 0 0 15px var(--neon); font-size: 1.8rem; }

        /* Stats Grid - Ping & Size */
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .stat-card {
            background: var(--card); border: 1px solid var(--border);
            padding: 12px; border-radius: 15px; text-align: center; position: relative;
            overflow: hidden;
        }
        .stat-card small { font-size: 0.6rem; color: #64748b; display: block; text-transform: uppercase; font-weight: 800; margin-bottom: 5px; }
        .stat-card span { font-family: 'JetBrains Mono'; font-size: 0.9rem; color: var(--neon); font-weight: 800; }
        
        /* Indikator Ping Berkedip */
        .ping-dot {
            display: inline-block; width: 6px; height: 6px; background: #00ff88; 
            border-radius: 50%; margin-right: 5px; box-shadow: 0 0 8px #00ff88;
            animation: blink 1s infinite;
        }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }

        /* Switcher Mode */
        .mode-container {
            display: flex; background: var(--card); border: 1px solid var(--border);
            border-radius: 50px; padding: 5px; margin-bottom: 20px; position: relative;
        }
        .mode-btn {
            flex: 1; padding: 12px; border: none; background: transparent; color: #64748b;
            font-weight: 800; font-size: 0.7rem; cursor: pointer; z-index: 2; transition: 0.3s;
        }
        .mode-btn.active { color: #000; }
        .mode-glider {
            position: absolute; height: calc(100% - 10px); width: calc(50% - 5px);
            background: var(--neon); border-radius: 40px; top: 5px; left: 5px;
            transition: 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55); z-index: 1;
        }

        .main-box { background: var(--card); border: 1px solid var(--border); border-radius: 20px; padding: 20px; }
        textarea {
            width: 100%; height: 180px; background: rgba(0,0,0,0.5); border: 1px solid var(--border);
            border-radius: 12px; padding: 15px; color: #00ffcc; font-family: 'JetBrains Mono';
            font-size: 0.75rem; resize: none; margin-bottom: 15px; outline: none;
        }

        .btn-action {
            width: 100%; background: var(--neon); color: #000; border: none; padding: 16px; border-radius: 12px;
            font-weight: 800; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px;
        }

        #resultArea { display: none; margin-top: 20px; animation: fadeInUp 0.3s ease; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .copy-btn { background: var(--neon); border: none; padding: 5px 12px; border-radius: 6px; font-weight: 800; font-size: 0.65rem; cursor: pointer; }

        body.mode-decrypt { --neon: var(--neon-danger); }
        .mode-decrypt .mode-glider { left: calc(50%); }
    </style>
</head>
<body id="bodyTag">
    <div class="container">
        <div class="header">
            <h1>dYpSy Protector</h1>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <small>Connection Latency</small>
                <span><i class="ping-dot"></i><span id="pingVal">Calculating...</span></span>
            </div>
            <div class="stat-card">
                <small>Payload Capacity</small>
                <span id="sizeVal">0 B</span>
            </div>
        </div>

        <div class="mode-container">
            <button class="mode-btn active" id="btnEnc" onclick="setMode('enc')">ENCRYPTION MODE</button>
            <button class="mode-btn" id="btnDec" onclick="setMode('dec')">DECRYPTION MODE</button>
            <div class="mode-glider" id="glider"></div>
        </div>

        <div class="main-box">
            <textarea id="inputCode" oninput="calculateSize()" placeholder="Paste code script/HTML here..."></textarea>
            <button class="btn-action" onclick="runEngine()">
                <i class="fas fa-bolt"></i> <span id="btnLabel">RUN SECURITY ENGINE</span>
            </button>
        </div>

        <div id="resultArea">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                <small style="color: var(--neon); font-weight: 800; letter-spacing: 1px;">[SYSTEM READY] OUTPUT:</small>
                <button class="copy-btn" onclick="copyResult()">COPY RESULT</button>
            </div>
            <textarea id="outputCode" readonly></textarea>
        </div>
    </div>

    <script>
        let currentMode = 'enc';

        // ENGINE PING (Real-time Simulation)
        function updatePing() {
            const ms = Math.floor(Math.random() * (38 - 14 + 1)) + 14;
            document.getElementById('pingVal').innerText = ms + 'ms';
            
            // Ubah warna dot ping kalau latency naik
            const dot = document.querySelector('.ping-dot');
            dot.style.background = ms > 30 ? '#ffcc00' : '#00ff88';
            dot.style.boxShadow = ms > 30 ? '0 0 8px #ffcc00' : '0 0 8px #00ff88';
        }
        setInterval(updatePing, 1500);
        updatePing();

        // ENGINE SIZE (B, KB, MB, GB, TB)
        function calculateSize() {
            const text = document.getElementById('inputCode').value;
            let bytes = new Blob([text]).size;
            const units = ['B', 'KB', 'MB', 'GB', 'TB'];
            if (bytes === 0) return document.getElementById('sizeVal').innerText = '0 B';
            const i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));
            const result = (bytes / Math.pow(1024, i)).toFixed(2) + ' ' + units[i];
            document.getElementById('sizeVal').innerText = result;
        }

        // MODE SWITCHER
        function setMode(m) {
            currentMode = m;
            document.body.className = (m === 'dec' ? 'mode-decrypt' : '');
            document.getElementById('btnEnc').classList.toggle('active', m === 'enc');
            document.getElementById('btnDec').classList.toggle('active', m === 'dec');
            document.getElementById('btnLabel').innerText = (m === 'enc' ? 'RUN SECURITY ENGINE' : 'RUN DECODER ENGINE');
            document.getElementById('resultArea').style.display = 'none';
        }

        // MAIN EXECUTION
        function runEngine() {
            const input = document.getElementById('inputCode').value.trim();
            const output = document.getElementById('outputCode');
            if(!input) return alert("Please input source code!");

            if(currentMode === 'enc') {
                try {
                    const b64 = btoa(unescape(encodeURIComponent(input)));
                    
                    // Signature Tag
                    const s1 = String.fromCharCode(60, 33, 45, 45);
                    const s2 = String.fromCharCode(45, 45, 62);
                    const signature = s1 + " Encoded Hard by Dypsy " + s2 + "\n";
                    
                    const resultScript = "<script>document.write(decodeURIComponent(escape(atob(\"" + b64 + "\"))));<\/script>";
                    output.value = signature + resultScript;
                    document.getElementById('resultArea').style.display = 'block';
                } catch(e) { alert("Security Engine Error!"); }
            } else {
                try {
                    const match = input.match(/atob\(['"]([^'"]+)['"]\)/);
                    output.value = match ? decodeURIComponent(escape(atob(match[1]))) : decodeURIComponent(escape(atob(input)));
                    document.getElementById('resultArea').style.display = 'block';
                } catch(e) { alert("Invalid Source!"); }
            }
        }

        function copyResult() {
            const out = document.getElementById('outputCode');
            out.select();
            document.execCommand('copy');
            alert("Success! Code copied to clipboard.");
        }
    </script>
</body>
</html>
